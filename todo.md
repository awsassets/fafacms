# 近期准备

- 随着文章的越来越多，一篇文章可以属于多个分类，于是很难办。目前还是限制只有两级分类。每一级都可以新增内容。但需要增加标签的功能。该需求不紧急，可忽视。
- 开发前端（进行中...）
- 开发后端仿朋友圈评论（评论可以互动，很重要）
- 站内信（社交不做这个很挫）
- 点赞（文章内容要可以点赞）
- 为了怕被爬虫和攻击，需要开发验证码功能。输入的都需要验证码。输出的暂不考虑，被爬不可避免。

升级版2.0 需求整理

```
1.验证码
每次获取验证码API，生成码和回答存入redis，有效期60s，某些接口需携带生成码和回答，进行验证，无论通不通过都删除redis。不考虑互斥。

2.历史内容
删除历史内容
恢复历史内容时可选保存草稿

3.内容
点赞内容(只能登陆人员才能点赞，可取消）


4.评论
评论有两种状态，正常和违规，违规评论不会显示。

官网：
评论添加
评论点赞  +1 -1  (必须登陆，不允许匿名)
精彩评论，10条，点赞数大于10排序。作者本人有个ui提示。
全部评论创建时间排序

对第一级评论的评论





对评论的评论，携带第一级评论，还有这次的评论：

哈哈 // @偷吃小饼干 : 哈哈



删除自己的评论，不会提醒被评论的人。

哈哈哈哈 // @小花花∠※∠※ : 该评论已经被删除

按创建时间和点赞数等查看评论。作者只能设置可评论或者不可评论，不可以操控评论。已经评论的永远都在，除非评论的人自己删除。

5.举报相关：
举报评论。另起一张表。举报超过十人即认为违规不需要管理员审核处理。
举报内容。同一张表
申诉被拉黑的文章和评论。只能自己申诉自己的东西。

管理员查看并且处理举报和申诉，状态有待处理，处理为没问题，处理为违规，处理为自动违规，待申诉，申诉成功，申诉失败。待处理时，可处理为违规，此时内容被拉黑，评论被拉黑。申诉可变为申诉成功和失败。

移入垃圾箱和删除内容时评论不会删除，只会提示内容已删除。已删除或者拉黑的会提示违规。

6.站内信：
通知发布文章，移入垃圾箱，恢复，真正删除，被别人评论，内容被别人点赞，文章被点赞，文章被拉黑，对别人发表评论，发表的评论被禁，举报已被处理，申诉已被处理。站内信可设置删除。


管理员用户查看全部评论。

Github和其他社交登陆。

7.文章赞助，没有库存和退款概念，不记名，不需要登录。列出赞助名单。站内信，有人给你打赏了。

管理员后台查看所有赞助记录。


8.关注好友
被关注

关注的好友发文章会站内信通知。

9.系统消息，私聊。管理员聊天，广播给所有人，一份数据，拉取时插入十天内的admin私信给我，作为私聊。私聊有频道，每对人有一个唯一频道，一张表，双方均可删除频道但可恢复。每个频道一张表，只允许发文本内容包括表情，自动去除html标签。私聊，a私信给b，b私信给a，会按创建时间拉取最近十条，可以拉页。
```

当用户量突破一定数量时，关闭注册，或者收费注册。作为一个小社区而存在。当并发数和数据量巨大无比时，开启阿里云oss和使用k8s副本部署，tidb分布式mysql可缓解，问题不大。

# TodoList

- [ ] **系统后端功能**
    - [x] 内部用户及用户组，资源和授权管理（管理员）
        - [x] 创建用户组
        - [x] 删除用户组
        - [x] 获取组信息
        - [x] 更新组信息
        - [x] 创建用户
        - [x] 获取用户信息
        - [x] 更改用户密码
        - [x] 禁用用户
        - [x] 用户绑定组
        - [x] 资源绑定组
        - [x] 列出组下的用户
        - [x] 列出组下的资源
        - [x] 授权拦截
        - [x] 列出用户
        - [x] 列出用户组
        - [x] 列出资源
        - [x] 用户登录
        - [x] 用户登出
        - [x] 用户一周内登录
        - [x] 获取个人信息
        - [x] 更新个人信息（个人或管理员）       
    - [x] 文件功能（个人）
        - [x] 上传文件
        - [x] 图片文件裁剪
        - [x] 阿里对象存储保存
        - [x] 列出文件（个人或管理员）
        - [x] 更改文件描述，标签，是否隐藏 （个人或管理员）
    - [x] 内容节点及内容功能（个人）
        - [x] 节点功能
            - [x] 创建节点
            - [x] 更新节点SEO
            - [x] 更新节点名字和描述
            - [x] 更新节点背景图
            - [x] 设置节点隐藏
            - [x] 设置节点的父节点
            - [x] 拖曳排序节点
            - [x] 删除节点
            - [x] 获取节点信息
            - [x] 列出节点（个人或管理员）
        - [x] 内容功能（个人）
            - [x] 创建内容
            - [x] 更新内容SEO
            - [x] 更新内容的标题和正文
            - [x] 更新内容背景图
            - [x] 设置内容隐藏
            - [x] 设置内容置顶
            - [x] 设置内容密码
            - [x] 设置内容是否可评论
            - [x] 更改内容的节点
            - [x] 拖曳排序内容
            - [x] 内容更新历史记录
            - [x] 发布内容
            - [x] 恢复历史版本中的内容
            - [x] 获取内容信息（个人或管理员）
            - [x] 获取历史版本内容（个人或管理员）
            - [x] 列出内容（个人或管理员）
            - [x] 列出历史版本内容（个人或管理员）
            - [x] 设置内容状态，违禁/正常（管理员）
            - [x] 内容丢到回收站
            - [x] 回收站内容恢复
            - [x] 删除回收站内容
            - [x] 删除历史版本内容
    - [ ] 内容评论功能
        - [ ] 新增评论
        - [ ] 回复评论
        - [ ] 列出评论
        - [ ] 删除评论
    - [ ] 点赞功能
        - [ ] 内容点赞
        - [ ] 评论点赞
    - [ ] 内容标签功能
    - [ ] 验证码功能
    - [ ] 关注和被关注功能
    - [ ] 站内信功能
        - [ ] 管理员群发站内信
        - [ ] 发布新文章站内信
        - [ ] 评论以及评论回复站内信
        - [ ] 关注站和被关注站内信
        - [ ] 点赞站内信
- [ ] **系统中端功能**
    - [x] 普通用户功能
        - [x] 用户注册
        - [x] 用户激活
        - [x] 重置激活码
        - [x] 找回密码
        - [x] 邮箱发送激活码和密码重置码
    - [x] 列出所有激活未封禁用户
    - [x] 获取某用户信息
    - [x] 列出某用户全部节点信息
    - [x] 获取某用户某节点以及其子节点信息
    - [x] 统计用户不同时期发布的正常内容数量
    - [x] 列出用户已发布的正常内容
    - [x] 获取文章内容
    - [ ] 获取内容评论
    - [ ] 获取内容点赞情况
    - [ ] 获取评论点赞情况
- [ ] **系统前端UI功能**
    - [ ] 普通用户后台界面
    - [ ] 管理员后台界面
    - [ ] 前端首页界面
- [ ] **API文档**
    - [x] 一期基本文档
